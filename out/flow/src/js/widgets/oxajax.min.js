!function($){oxAjax={loadingScreen:{start:function(t,e){var o=Array();return $(t).each(function(){var t=document.createElement("div");if(t.innerHTML='<div class="loadingfade"></div><div class="loadingicon"></div><div class="loadingiconbg"></div>',$("div",t).css({position:"absolute",left:$(this).offset().left-10,top:$(this).offset().top-10,width:$(this).width()+20,height:$(this).height()+20}),e&&e.length){var r=Math.round(e.offset().left-10-$(this).offset().left+e.width()/2),n=e.offset().top,i=Math.round(n-10-$(this).offset().top+(e.last().offset().top-n+e.last().height())/2);$("div.loadingiconbg, div.loadingicon",t).css({"background-position":r+"px "+i+"px"})}$("div.loadingfade",t).css({opacity:0}).animate({opacity:.55},200),$("body").append(t),o.push(t)}),o},stop:function(t){$.each(t,function(t,e){$("div",e).not(".loadingfade").remove(),$("div.loadingfade",e).stop(!0,!0).animate({opacity:0},100,function(){$(e).remove()})})}},updatePageErrors:function(t){if(t.length){var e,o=$("#content > .status.error");if(0==o.length&&($("#content").prepend("<div class='status error corners'>"),o=$("#content > .status.error")),o)for(o.children().remove(),e=0;e<t.length;e++){var r=document.createElement("p");$(r).append(document.createTextNode(t[e])),o.append(r)}}else $("#content > .status.error").remove()},ajax:function(t,e){var o=this,r={},n="",i="";"FORM"==t[0].tagName?($("input",t).each(function(){if("checkbox"==this.type&&!this.checked)return!0;r[this.name]=this.value}),n=t.attr("action"),i=t.attr("method")):"A"==t[0].tagName&&(n=t.attr("href")),e.additionalData&&$.each(e.additionalData,function(t,e){r[t]=e});var a={},s=Array();for(var c in r)r.hasOwnProperty(c)&&s.push(c);s.sort().forEach(function(t){a[t]=r[t]});var d=null;e.targetEl&&(d=o.loadingScreen.start(e.targetEl,e.iconPosEl)),i||(i="get"),jQuery.ajax({data:a,url:n,type:i,timeout:3e4,beforeSend:function(t,e){e.url=e.url.replace("&&","&")},error:function(t,r,n){d&&o.loadingScreen.stop(d),e.onError&&e.onError(t,r,n)},success:function(t){d&&o.loadingScreen.stop(d),void 0!=t.debuginfo&&t.debuginfo&&$("body").append(t.debuginfo),void 0!=t.errors&&void 0!=t.errors.default?o.updatePageErrors(t.errors.default):o.updatePageErrors([]),e.onSuccess&&e.onSuccess(t,r)}})},reportJSError:function(t){"undefined"!=typeof console&&void 0!==console.error&&console.error(t)},evalScripts:function(container){var self=this;try{$("script",container).each(function(){try{if(""!=this.src&&0==$('body > script[src="'+this.src+'"]').length)return $("body").append(this),document.body.appendChild(this),!0;eval(this.innerHTML)}catch(t){self.reportJSError(t)}$(this).remove()})}catch(t){self.reportJSError(t)}}},$.widget("ui.oxAjax",oxAjax)}(jQuery);